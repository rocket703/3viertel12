---
import Layout from '../../layouts/Layout.astro';
import gigs from '../../data/gigs.json';

export async function getStaticPaths() {
  return gigs.map((gig) => ({
    params: { slug: gig.slug },
    props: { gig },
  }));
}

const { gig } = Astro.props;

// Pr√§zise Adresse f√ºr Google Maps zusammenbauen
const fullAddress = `${gig.venue}, ${gig.street}, ${gig.zip} ${gig.city}`;
const mapsUrl = `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(fullAddress)}`;
---

<Layout title={`${gig.venue} - 3/4Zw√∂√∂√∂lwe`}>
  <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&display=swap" rel="stylesheet">
  
  <section class="detail-page">
    <div class="noise"></div>
    <div class="container">
      
      <a href="/3viertel12/#gigs" class="back-link">‚Üê ZUR√úCK ZUR TOUR</a>

      <div class="header-block">
        <h1 class="white-rock-style">{gig.venue}</h1>
        <p class="location-sub">{gig.city.toUpperCase()}</p>
      </div>

      <div class="content-grid">
        <div class="info-side">
          <h2 class="section-label">DER GIG</h2>
          <p class="description">{gig.description}</p>
          
          <div class="stats">
            <div class="stat-item">
              <span class="label">DATUM</span>
              <span class="val">{new Date(gig.date).toLocaleDateString('de-DE')}</span>
            </div>
            <div class="stat-item">
              <span class="label">EINLASS</span>
              <span class="val">{gig.time} UHR</span>
            </div>
          </div>

          <div class="address-block">
            <h2 class="section-label">LOCATION</h2>
            <p class="address-text">
              {gig.venue}<br />
              {gig.street}<br />
              {gig.zip} {gig.city}
            </p>
          </div>
        </div>

        <div class="action-side">
          <div class="action-card">
            <h3 class="card-title">LIVE DABEI SEIN</h3>
            
            {/* GOOGLE MAPS LINK mit exakter Adresse */}
            <a href={mapsUrl} target="_blank" rel="noopener noreferrer" class="block-font maps-btn">
              üìç ROUTE PLANEN
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</Layout>

<style>
  .detail-page { background: #050505; min-height: 100vh; padding: 8rem 1rem; position: relative; overflow: hidden; }
  .container { max-width: 1000px; margin: 0 auto; position: relative; z-index: 10; }
  
  .back-link { font-family: 'Bebas Neue', sans-serif; color: #cc0000; text-decoration: none; letter-spacing: 2px; transition: 0.2s; }
  .back-link:hover { color: #fff; padding-left: 5px; }

  .header-block { margin: 3rem 0; }
  .white-rock-style { font-family: 'Bebas Neue', sans-serif; font-size: clamp(3.5rem, 10vw, 8rem); color: #fff; text-shadow: 4px 4px 0px #cc0000; line-height: 0.9; margin: 0; }
  .location-sub { color: #888; letter-spacing: 8px; font-size: 1.5rem; margin-top: 0.5rem; font-family: 'Bebas Neue', sans-serif; }

  .content-grid { display: grid; grid-template-columns: 1.2fr 0.8fr; gap: 4rem; margin-top: 4rem; }
  
  .section-label { color: #cc0000; font-family: 'Bebas Neue', sans-serif; border-bottom: 2px solid #cc0000; display: inline-block; margin-bottom: 2rem; font-size: 1.5rem; letter-spacing: 1px; }
  
  .description { color: #eee; font-size: 1.2rem; line-height: 1.6; font-weight: 600; text-transform: uppercase; margin-bottom: 3rem; }

  .stats { display: flex; gap: 3rem; margin-bottom: 4rem; }
  .stat-item .label { display: block; color: #444; font-size: 0.8rem; font-weight: 900; margin-bottom: 0.5rem; }
  .stat-item .val { color: #fff; font-family: 'Bebas Neue', sans-serif; font-size: 2.5rem; line-height: 1; }

  /* Adress Styling */
  .address-block { margin-top: 2rem; }
  .address-text { color: #fff; font-family: 'Bebas Neue', sans-serif; font-size: 1.8rem; line-height: 1.2; letter-spacing: 1px; color: #aaa; }

  .action-card { background: #111; padding: 2.5rem; border: 1px solid #222; text-align: center; position: sticky; top: 100px; }
  .card-title { font-family: 'Bebas Neue', sans-serif; color: #fff; margin-bottom: 2rem; font-size: 2rem; letter-spacing: 1px; }

  .block-font { 
    display: block; width: 100%; padding: 1.2rem; margin-bottom: 1rem;
    font-family: 'Bebas Neue', sans-serif; font-size: 1.6rem; text-decoration: none;
    clip-path: polygon(5% 0, 100% 0, 95% 100%, 0% 100%);
    transition: 0.2s;
    letter-spacing: 1px;
  }

  .maps-btn { background: #222; color: #fff; border: 1px solid #444; }
  .maps-btn:hover { background: #fff; color: #000; transform: scale(1.02); }
  
  .ticket-btn { background: #cc0000; color: #fff; }
  .ticket-btn:hover { background: #fff; color: #cc0000; transform: scale(1.02); }

  .noise { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: url('https://www.transparenttextures.com/patterns/asfalt-dark.png'); opacity: 0.2; pointer-events: none; }

  @media (max-width: 768px) { 
    .content-grid { grid-template-columns: 1fr; } 
    .action-side { order: -1; } /* Packt die Action-Card mobil nach oben */
    .stats { flex-direction: column; gap: 2rem; }
  }
</style>